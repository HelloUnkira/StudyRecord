#ifndef GENERAL_ARCH_H
#define GENERAL_ARCH_H
// C std lib
#include <stdint.h>
#include <stdbool.h>
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#define ARCH_USE_ARM    1
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#if 0
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#elif ARCH_USE_ARM
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#define ArchRegR(r)     ({u64 v; asm volatile("mrs %0, "##r : "=r" (v)); v;})
#define ArchRegW(v, r)  ({asm volatile("msr " ##r## ", %x0"::"rZ"((uint64_t)v));})
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#define Arch_wfe()		asm volatile("wfe" : : : "memory")
#define Arch_wfi()		asm volatile("wfi" : : : "memory")
#define Arch_isb()		asm volatile("isb" : : : "memory")
#define Arch_dmb(opt)   asm volatile("dmb " #opt : : : "memory")
#define Arch_dsb(opt)	asm volatile("dsb " #opt : : : "memory")
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
//#elif ARCH_USE_UNKNOWN
//继续添加其他平台
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#else
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#endif
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
#endif
