#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
struct PriorityQueue {
    union {
        struct PriorityQueue *Queue;
        struct PriorityQueue *Near;
    };
};
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
typedef struct PriorityQueue PQ_Node;
typedef struct PriorityQueue PQ_Body;
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void PQ_ResetQueue(PQ_Body *Queue)
{
    Queue->Queue = NULL;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void PQ_ResetNode(PQ_Node *Node)
{
    Node->Near = NULL;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
PQ_Node * PQ_GetHead(PQ_Body *Queue)
{
    return Queue->Queue;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void PQ_EnQueue(PQ_Body *Queue, PQ_Node *Node, bool (*Compare)(PQ_Node *Node1, PQ_Node *Node2))
{
    if (Queue->Queue == NULL) {
        Queue->Queue = Node;
        Node->Near = NULL;
        return;
    }
    if (Compare(Node, Queue->Queue) == true) {
        Node->Near = Queue->Queue;
        Queue->Queue = Node;
        return;
    }
    PQ_Node *Current = NULL;
    for (Current = Queue->Queue; Current->Near != NULL; Current = Current->Near) {
        if (Compare(Current->Near, Node) == true)
            continue;
        Node->Near = Current->Near;
        Current->Near = Node;
        return;
    }
    Current->Near = Node;
    Node->Near = NULL;
    return;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void PQ_DeQueue(PQ_Body *Queue, PQ_Node *Node)
{
    if (Node == NULL) {
        if (Queue->Queue == NULL)
            return;
        if (Queue->Queue != NULL) {
            Node = Queue->Queue;
            Queue->Queue = Queue->Queue->Near;
            return;
        }
    }
    if (Node != NULL) {
        if (Queue->Queue == NULL)
            return;
        if (Queue->Queue == Node) {
            Queue->Queue = Queue->Queue->Near;
            return;
        }
    }
    PQ_Node *Current = NULL;
    for (Current = Queue->Queue; Current->Near != NULL; Current = Current->Near) {
        if (Current->Near != Node)
            continue;
        Current->Near = Current->Near->Near;
        return;
    }
    return;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
