#include <stdint.h>
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 单向链表迭代器 */
struct SingleList {
    union {
        struct SingleList *Head;//单向链表头
        struct SingleList *Tail;//单向链表尾
        struct SingleList *Near;//单向链表就近项
    };
};
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 核心转义 */
typedef struct SingleList SL_List;
typedef struct SingleList SL_Node;
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void SL_List_Reset(SL_List *ListHead, SL_List *ListTail)
{
    ListHead->Head = NULL;
    ListTail->Tail = NULL;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
void SL_Node_Reset(SL_Node *Node)
{
    Node->Near = NULL;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
SL_Node * SL_List_GetHead(SL_List *ListHead)
{
    return ListHead->Head;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
SL_Node * SL_List_GetTail(SL_List *ListTail)
{
    return ListTail->Tail;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
SL_Node * SL_Node_GetNear(SL_Node *Node)
{
    return Node->Near;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 节点头追加 */
void SL_List_Prepend(SL_List *ListHead, SL_List *ListTail, SL_Node *Node)
{
    Node->Near = ListHead->Head;
    if (ListHead->Head == NULL)
        ListTail->Tail = Node;
    ListHead->Head = Node;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 节点尾追加 */
void SL_List_Append(SL_List *ListHead, SL_List *ListTail, SL_Node *Node)
{
    Node->Near = NULL;
    if (ListTail->Tail != NULL)
        ListTail->Tail->Near = Node;
    if (ListTail->Tail == NULL)
        ListHead->Head = Node;
    ListTail->Tail = Node;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 节点插入(单链表插入需要指定目标节点,Target不为NULL) */
void SL_List_Insert(SL_List *ListHead, SL_List *ListTail, SL_Node *Target, SL_Node *Node)
{
    Node->Near = Target->Near;
    Target->Near = Node;
    if (ListTail->Tail == Target)
        ListTail->Tail = Node;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
/* 节点删除(单链表删除需要指定前项节点) */
void SL_List_Remove(SL_List *ListHead, SL_List *ListTail, SL_Node *Target, SL_Node *Node)
{
    if (Target != NULL)
        Target->Near = Node->Near;
    if (ListHead->Head == Node)
        ListHead->Head = Node->Near;
    if (ListTail->Tail == Node)
        ListTail->Tail = Target;
}
/*************************************************************************************************/
/*************************************************************************************************/
/*************************************************************************************************/
